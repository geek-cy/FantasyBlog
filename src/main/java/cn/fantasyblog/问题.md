### 5.13总结
#### 访客登录功能
用到的表：访客表

设定了一个实体类VisitorVO,从前台登录拿到访客的用户名或邮箱作为一个身份凭证，并通过凭证验证访客表，得到访客id和session

服务器识别session的方法是通过jsessionid,jsessionid在请求头的set-cookie里，就是一个cookie用来记录session的

将访客id储存在session.setAttribute中
#### 点赞功能
用到的表：Like(存储文章id和访客id键值对),redis中键(Like_map、Like_count)

访客点赞前验证是否登录：通过session.getAttribute得到值，若为空则需要登录

访客点赞前验证是否点赞：
redis中通过Cursor scan扫描List<Like>,若大小为0则向Like_map键中设为1，若不为0则设为size  -->保证redis中点赞量一致
mysql中通过验证Like表是否存在键值对

显示点赞量：
前台显示点赞数量redis+mysql，redis中扫一遍Like_count,得到相应文章的赞量
最后持久化两个键再全部扫一遍

#### 定时任务
初始化后不会修改参数，只能清空数据库

#### 评论功能


#### 测试前准备
邮箱功能关闭

#### 上线前准备
数据库全部id,数量全部重置

#### 测试账号
password:ceshizhanghao

#### 未解决
1、设置时间任务持久化redis到db，缓存过期和持久化怎么保证不冲突？
2、友链留言
#### 已解决
1、validate注解抛错太长
2、

#### kafka
bin\windows\zookeeper-server-start.bat config\zookeeper.properties
bin\windows\kafka-server-start.bat config\server.properties


#### 部署
后台运行时候如何优雅关闭